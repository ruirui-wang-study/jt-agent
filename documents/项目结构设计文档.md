项目目录结构（agent-service）
```
agent-service/
├── pom.xml                                         # Maven 构建配置
│
├── src/main/java/com/enterprise/agent/
│   │
│   ├── AgentApplication.java                       # Spring Boot 启动入口
│   │
│   ├── controller/                                 # 【API 接入层】接收HTTP请求，参数校验，生成traceId
│   │   ├── AgentController.java                    # Agent 对话主接口
│   │   ├── AdminController.java                    # 管理后台接口（会话查询、统计）
│   │   └── dto/
│   │       ├── request/                            # 请求参数定义
│   │       │   ├── ChatRequest.java
│   │       │   └── SessionEndRequest.java
│   │       └── response/                           # 响应结构定义
│   │           ├── ChatResponse.java
│   │           └── ErrorResponse.java
│   │
│   ├── session/                                    # 【会话管理层】会话生命周期、上下文维护
│   │   ├── ConversationContext.java                # 会话上下文结构
│   │   ├── SessionManager.java                     # 会话CRUD操作
│   │   ├── SessionStore.java                       # 会话存储接口
│   │   └── impl/
│   │       ├── RedisSessionStore.java              # Redis存储实现
│   │       └── LocalSessionStore.java              # 本地缓存实现
│   │
│   ├── orchestrator/                               # 【Agent 编排层】状态机、流程调度
│   │   ├── AgentOrchestrator.java                  # 核心编排器
│   │   ├── AgentState.java                         # 状态枚举
│   │   ├── StateMachine.java                       # 状态机实现
│   │   └── StateTransition.java                    # 状态转换记录
│   │
│   ├── intent/                                     # 【意图识别层】意图分类、槽位抽取
│   │   ├── IntentRecognizer.java                   # 意图识别器
│   │   ├── SlotExtractor.java                      # 槽位抽取器
│   │   ├── IntentType.java                         # 意图类型枚举（冻结）
│   │   ├── IntentResult.java                       # 识别结果结构
│   │   └── slot/
│   │       ├── SlotDefinition.java                 # 槽位定义
│   │       └── SlotValidator.java                  # 槽位格式校验
│   │
│   ├── tool/                                       # 【工具层】业务能力封装
│   │   ├── Tool.java                               # 工具接口
│   │   ├── ToolRegistry.java                       # 工具注册中心
│   │   ├── ToolExecutor.java                       # 工具执行器
│   │   ├── ToolResult.java                         # 执行结果结构
│   │   ├── ToolContext.java                        # 执行上下文
│   │   └── impl/
│   │       ├── sql/                                # SQL查询类工具
│   │       │   ├── OrderQueryTool.java             # 订单查询
│   │       │   ├── LogisticsQueryTool.java         # 物流查询
│   │       │   └── AccountQueryTool.java           # 账户查询
│   │       ├── rag/                                # RAG检索类工具
│   │       │   └── KnowledgeSearchTool.java        # 知识库检索
│   │       ├── api/                                # 外部API类工具
│   │       │   └── ThirdPartyApiTool.java          # 第三方服务调用
│   │       └── rule/                               # 规则判断类工具
│   │           └── RefundRuleTool.java             # 退款规则判断
│   │
│   ├── security/                                   # 【权限校验 & 风控层】安全拦截
│   │   ├── PermissionChecker.java                  # 资源归属校验
│   │   ├── RiskController.java                     # 风控拦截（限流、黑名单）
│   │   ├── SensitiveWordFilter.java                # 敏感词过滤
│   │   ├── InjectionDetector.java                  # 注入攻击检测
│   │   └── HighRiskInterceptor.java                # 高风险操作拦截
│   │
│   ├── llm/                                        # 【LLM 接入层】大模型调用抽象
│   │   ├── LLMClient.java                          # LLM调用接口
│   │   ├── LLMRequest.java                         # 请求结构
│   │   ├── LLMResponse.java                        # 响应结构
│   │   ├── PromptTemplate.java                     # Prompt模板管理
│   │   └── impl/
│   │       ├── DeepSeekClient.java                 # DeepSeek实现
│   │       ├── OpenAIClient.java                   # OpenAI实现
│   │       └── MockLLMClient.java                  # 测试用Mock
│   │
│   ├── response/                                   # 【响应生成模块】结构化数据转自然语言
│   │   ├── ResponseGenerator.java                  # 响应生成器
│   │   ├── ResponseTemplate.java                   # 响应模板定义
│   │   └── ResponseValidator.java                  # 响应内容校验
│   │
│   ├── fallback/                                   # 【兜底处理模块】异常场景处理
│   │   ├── FallbackManager.java                    # 兜底策略管理
│   │   ├── HumanHandoffService.java                # 转人工服务
│   │   └── FallbackReply.java                      # 固定话术定义
│   │
│   ├── log/                                        # 【日志 & 评估层】全链路记录
│   │   ├── AgentLogger.java                        # Agent专用日志
│   │   ├── AuditTrail.java                         # 审计追踪
│   │   ├── MetricsCollector.java                   # 指标采集
│   │   └── LogEvent.java                           # 日志事件结构
│   │
│   ├── config/                                     # 【配置模块】参数配置
│   │   ├── AgentConfig.java                        # Agent参数
│   │   ├── LLMConfig.java                          # LLM参数
│   │   ├── SecurityConfig.java                     # 安全参数
│   │   └── ToolConfig.java                         # 工具参数
│   │
│   └── exception/                                  # 【异常定义】统一异常处理
│       ├── AgentException.java                     # 基础异常
│       ├── IntentUnrecognizedException.java        # 意图未识别
│       ├── SlotMissingException.java               # 槽位缺失
│       ├── PermissionDeniedException.java          # 权限拒绝
│       ├── ToolExecutionException.java             # 工具执行失败
│       └── GlobalExceptionHandler.java             # 全局异常处理器
│
├── src/main/resources/
│   ├── application.yml                             # 主配置文件
│   ├── application-dev.yml                         # 开发环境配置
│   ├── application-prod.yml                        # 生产环境配置
│   ├── prompts/                                    # Prompt模板文件
│   │   ├── intent_recognition.txt                  # 意图识别Prompt
│   │   ├── slot_extraction.txt                     # 槽位抽取Prompt
│   │   └── response_generation.txt                 # 响应生成Prompt
│   ├── tools/                                      # 工具配置文件
│   │   ├── sql_templates.json                      # SQL模板定义
│   │   └── tool_definitions.json                   # 工具元数据
│   └── security/                                   # 安全配置文件
│       └── sensitive_words.txt                     # 敏感词库
│
└── src/test/java/com/enterprise/agent/
    ├── controller/                                 # 接口测试
    ├── intent/                                     # 意图识别测试
    ├── tool/                                       # 工具执行测试
    └── orchestrator/                               # 编排流程测试
```


一级目录职责说明
目录	职责说明
controller/	接收外部请求，校验格式，生成 traceId，转发 Orchestrator
session/	会话生命周期管理，维护结构化对话历史和会话状态
orchestrator/	状态机驱动的流程编排，协调各模块调用顺序
intent/	调用 LLM 识别意图和抽取槽位，输出结构化结果
tool/	封装所有业务能力为可测试的工具，执行 SQL/RAG/API/Rule
security/	权限校验、风控拦截、敏感词过滤、注入检测
llm/	抽象 LLM 调用，管理 Prompt 模板，支持多厂商切换
response/	将工具返回的结构化数据转换为自然语言回复
fallback/	处理异常场景：转人工、拒答、固定话术兜底
log/   全链路日志记录、审计追踪、指标采集
config/	  统一管理各模块配置参数
exception/ 	定义业务异常类型，统一异常处理
